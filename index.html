<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø£Ù†ÙˆØ§Ø¹ Ø®Ø¨Ø± ÙƒØ§Ù† ÙˆØ¥Ù†</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f7f7f7;
            transition: background 0.5s ease;
        }

        h1 {
            text-align: center;
        }

        .sub-info {
            text-align: center;
            margin: 0;
        }

        #question-box {
            margin: 20px auto;
            max-width: 900px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background: #ffffff;
        }

        #controls {
            max-width: 900px;
            margin: 15px auto;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: space-between;
            align-items: center;
        }

        #controls .buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            padding: 8px 14px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }

        #btn-reset {
            background-color: #f39c12;
            color: #fff;
        }

        #btn-check {
            background-color: #27ae60;
            color: #fff;
        }

        #btn-start-timer {
            background-color: #3498db;
            color: #fff;
        }

        #btn-advanced {
            background-color: #9b59b6;
            color: #fff;
        }

        #timer-box {
            font-size: 16px;
            font-weight: bold;
        }

        #timer {
            padding: 4px 8px;
            border-radius: 4px;
            background: #ffffff;
            border: 1px solid #ccc;
        }

        /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø¬Ø¯ÙˆÙ„ ÙˆØ¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ù…Ù„ */
        #main-area {
            max-width: 1100px;
            margin: 20px auto;
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        #answer-pool {
            flex: 0 0 32%;
            min-height: 300px;
            padding: 10px;
            border: 2px dashed #777;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: #ffffff;
            overflow-y: auto;
            max-height: 500px;
        }

        .answer {
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid #666;
            background: #e8f0ff;
            cursor: grab;
            user-select: none;
            font-size: 14px;
            line-height: 1.5;
            transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.2s;
        }

        .answer:active {
            transform: scale(1.03);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        table {
            flex: 1;
            border-collapse: collapse;
            background: #ffffff;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            vertical-align: top;
            text-align: center;
        }

        th {
            color: #333;
            background-color: #f0f3f4;
        }

        .dropzone {
            min-height: 70px;
            transition: background-color 0.15s ease, outline 0.15s ease;
        }

        .dropzone.over {
            outline: 2px dashed #4a4aff;
            background-color: #eef0ff !important;
        }

        #result {
            max-width: 900px;
            margin: 10px auto;
            font-weight: bold;
            font-size: 16px;
            text-align: center;
        }

        .correct {
            background: linear-gradient(135deg, #d4efdf, #a9dfbf) !important;
            border-color: #27ae60 !important;
        }

        .incorrect {
            background: linear-gradient(135deg, #f9d6d5, #f5b7b1) !important;
            border-color: #c0392b !important;
        }

        .disabled {
            opacity: 0.6;
            cursor: not-allowed !important;
        }

        #celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            overflow: hidden;
            z-index: 999;
        }

        .star {
            position: absolute;
            width: 12px;
            height: 12px;
            opacity: 0.95;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%,
                               79% 91%, 50% 70%, 21% 91%, 32% 57%,
                               2% 35%, 39% 35%);
            animation: fall 2.2s linear forwards;
        }

        @keyframes fall {
            0% {
                transform: translateY(-10vh) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(110vh) scale(0.5);
                opacity: 0;
            }
        }

        .win-flash {
            background: radial-gradient(circle at top, #fff9c4, #f8bbd0, #bbdefb);
        }

        .win-bounce {
            animation: winBounce 1s ease-in-out 0s 2;
        }

        @keyframes winBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.12); }
        }

        .reset-flash {
            animation: resetFlash 0.7s ease;
        }

        @keyframes resetFlash {
            0% { background-color: #fff3cd; }
            100% { background-color: #f7f7f7; }
        }
    </style>
</head>
<body>

    <h1>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø£Ù†ÙˆØ§Ø¹ Ø®Ø¨Ø± ÙƒØ§Ù† ÙˆØ¥Ù†</h1>
    <p class="sub-info">Ø§Ù„Ù…Ø¯Ø±Ø³Ø©: Ø§Ù„Ø¯ÙŠØ³Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ù„Ù„Ø¨Ù†Ø§Øª</p>
    <p class="sub-info">Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ Ø§Ù„Ø²ÙˆØ§ÙŠØ¯Ø©</p>

    <div id="question-box">
        <h2 id="question-text">
            Ø§Ø³Ø­Ø¨ Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù…Ù† Ø§Ù„Ø£Ø³ÙÙ„ ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ø®Ø§Ù†Ø© <strong>Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¨Ø±</strong> Ø§Ù„ØµØ­ÙŠØ­:
            (Ø®Ø¨Ø± Ù…ÙØ±Ø¯ Ù„ÙØ¸Ù‹Ø§ØŒ Ø®Ø¨Ø± Ø¬Ù…Ù„Ø© ÙØ¹Ù„ÙŠØ©ØŒ Ø®Ø¨Ø± Ø¬Ù…Ù„Ø© Ø§Ø³Ù…ÙŠØ©ØŒ Ø®Ø¨Ø± Ø´Ø¨Ù‡ Ø¬Ù…Ù„Ø©).
        </h2>
    </div>

    <div id="controls">
        <div class="buttons">
            <button id="btn-reset">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
            <button id="btn-check">Ø¥Ù†Ù‡Ø§Ø¡</button>
            <button id="btn-start-timer">Ø§Ø¨Ø¯Ø£</button>
            <button id="btn-advanced">Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙ‚Ø¯Ù…</button>
        </div>
        <div id="timer-box">
            Ø§Ù„Ù…Ø¤Ù‚Øª:
            <span id="timer">00:00</span>
        </div>
    </div>

    <h3 id="level-hint" style="text-align:center;">Ø§Ø³Ø­Ø¨ÙŠ Ø§Ù„Ø¬Ù…Ù„Ø© ÙˆØ¶Ø¹ÙŠÙ‡Ø§ ÙÙŠ Ø®Ø§Ù†Ø© Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¨Ø± Ø§Ù„ØµØ­ÙŠØ­</h3>

    <!-- Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©: Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ù…Ù„ + Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
    <div id="main-area">
        <!-- Ø§Ù„Ø¬Ù…Ù„ Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨ -->
        <div id="answer-pool" class="dropzone">
            <!-- Ø§Ù„Ø¬Ù…Ù„ ØªÙÙˆÙ„Ù‘ÙØ¯ Ù…Ù† Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
        </div>

        <table>
            <thead>
                <tr>
                    <th>Ù†ÙˆØ¹ Ø§Ù„ØªØµÙ†ÙŠÙ</th>
                    <th>Ø§Ù„Ø¬Ù…Ù„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©</th>
                </tr>
            </thead>
            <tbody id="categories-body">
                <!-- ÙŠÙÙˆÙ„Ù‘ÙØ¯ Ù…Ù† Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
            </tbody>
        </table>
    </div>

    <div id="result"></div>

    <!-- Ø£ØµÙˆØ§Øª -->
    <audio id="success-sound">
        <source src="clap.mp3" type="audio/mpeg">
    </audio>

    <audio id="fail-sound">
        <source src="fail.mp3" type="audio/mpeg">
    </audio>

    <!-- Ø·Ø¨Ù‚Ø© Ø§Ù„Ø§Ø­ØªÙØ§Ù„ -->
    <div id="celebration"></div>

    <script>
        // ===== ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ø³ØªÙˆÙŠÙŠÙ† =====
        // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 1: Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®Ø¨Ø±
        const categoriesLevel1 = [
            { id: 'zone-single',  label: 'Ø®Ø¨Ø± Ù…ÙØ±Ø¯ Ù„ÙØ¸Ù‹Ø§',                    key: 'single'   },
            { id: 'zone-verb',    label: 'Ø®Ø¨Ø± Ø¬Ù…Ù„Ø© ÙØ¹Ù„ÙŠØ©',                    key: 'verb'     },
            { id: 'zone-nominal', label: 'Ø®Ø¨Ø± Ø¬Ù…Ù„Ø© Ø§Ø³Ù…ÙŠØ©',                    key: 'nominal'  },
            { id: 'zone-semi',    label: 'Ø®Ø¨Ø± Ø´Ø¨Ù‡ Ø¬Ù…Ù„Ø© (Ø¬Ø§Ø± ÙˆÙ…Ø¬Ø±ÙˆØ± / Ø¸Ø±Ù)',  key: 'semi'     }
        ];

        // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 2: Ø£Ù†ÙˆØ§Ø¹ Ø§Ø³Ù… ÙƒØ§Ù† ÙˆØ¥Ù†
        const categoriesLevel2 = [
            { id: 'zone-name-attached',     label: 'Ø¶Ù…ÙŠØ± Ù…ØªØµÙ„',    key: 'attached'      },
            { id: 'zone-name-detached',     label: 'Ø¶Ù…ÙŠØ± Ù…Ù†ÙØµÙ„',   key: 'detached'      },
            { id: 'zone-name-noun',         label: 'Ø§Ø³Ù… Ø¸Ø§Ù‡Ø±',     key: 'noun'          },
            { id: 'zone-name-demonstrative',label: 'Ø§Ø³Ù… Ø¥Ø´Ø§Ø±Ø©',    key: 'demonstrative' },
            { id: 'zone-name-relative',     label: 'Ø§Ø³Ù… Ù…ÙˆØµÙˆÙ„',    key: 'relative'      }
        ];

        let currentLevel = 1; // 1 = Ø®Ø¨Ø±ØŒ 2 = Ù†ÙˆØ¹ Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø³Ø®

        // ===== Ø¨Ù†Ùƒ Ø§Ù„Ø¬Ù…Ù„ Ø§Ù„Ø£ØµÙ„ÙŠ (Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¨Ø± ÙÙ‚Ø·ØŒ Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø³Ø® = Ø§Ø³Ù… Ø¸Ø§Ù‡Ø±) =====
        const baseQuestions = [
            // ÙƒØ§Ù† ÙˆØ£Ø®ÙˆØ§ØªÙ‡Ø§ â€“ Ø®Ø¨Ø± Ù…ÙØ±Ø¯ Ù„ÙØ¸Ù‹Ø§
            { text: "ÙƒØ§Ù†Ù Ø§Ù„Ø·Ø§Ù„Ø¨Ù Ù…Ø¬ØªÙ‡Ø¯Ù‹Ø§.",                type: "single" },
            { text: "Ø£ØµØ¨Ø­ØªÙ Ø§Ù„Ø·Ø§Ù„Ø¨ØªØ§Ù†Ù Ù…ØªÙÙˆÙ‚ØªÙŠÙ†.",          type: "single" },
            { text: "ØµØ§Ø±Ù Ø§Ù„Ù„Ø§Ø¹Ø¨ÙˆÙ†Ù Ù…Ø³ØªØ¹Ø¯ÙŠÙ†.",              type: "single" },
            { text: "Ø¸Ù„Ù‘Ù Ø§Ù„ÙÙ„Ø§Ø­Ù Ù†Ø´ÙŠØ·Ù‹Ø§.",                  type: "single" },
            { text: "Ø¨Ø§ØªØªÙ Ø§Ù„Ø³Ù…Ø§Ø¡Ù ØµØ§ÙÙŠØ©Ù‹.",                 type: "single" },
            { text: "Ù„ÙŠØ³Ù Ø§Ù„ÙƒØ°Ø¨Ù Ù…Ø­Ù…ÙˆØ¯Ù‹Ø§.",                  type: "single" },
            { text: "ÙƒØ§Ù†ØªÙ Ø§Ù„Ø´Ù…Ø³Ù Ù…Ø´Ø±Ù‚Ø©Ù‹.",                  type: "single" },
            { text: "Ø£Ø¶Ø­Ù‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø§Ù†Ù Ù…ØªØ¹Ø¨ÙŠÙ†.",               type: "single" },
            { text: "Ø£ØµØ¨Ø­Ù Ø§Ù„Ø£Ø·ÙØ§Ù„Ù Ø³Ø¹Ø¯Ø§Ø¡Ù.",               type: "single" },
            { text: "ØµØ§Ø±Ù Ø§Ù„Ø·Ø±ÙŠÙ‚Ù Ù…Ø²Ø¯Ø­Ù…Ù‹Ø§.",                type: "single" },
            { text: "Ø¸Ù„Ù‘Ù Ø§Ù„Ø¬Ù†ÙˆØ¯Ù Ø«Ø§Ø¨ØªÙŠÙ†.",                  type: "single" },
            { text: "Ù…Ø§ Ø²Ø§Ù„Ù Ø§Ù„ÙˆÙ‚ØªÙ Ù…Ø¨ÙƒØ±Ù‹Ø§.",                type: "single" },
            { text: "Ù„ÙŠØ³Ù Ø§Ù„ØºØ´Ù‘Ù Ø­Ù„Ù‘Ù‹Ø§.",                    type: "single" },
            { text: "ÙƒØ§Ù†ØªÙ Ø§Ù„Ø²Ù‡Ø±ØªØ§Ù†Ù Ø°Ø§Ø¨Ù„ØªÙŠÙ†.",              type: "single" },
            { text: "Ø£ØµØ¨Ø­Ù Ø§Ù„Ù…Ø¹Ù„Ù…ÙˆÙ†Ù Ø¬Ø§Ù‡Ø²ÙŠÙ†.",              type: "single" },

            // ÙƒØ§Ù† ÙˆØ£Ø®ÙˆØ§ØªÙ‡Ø§ â€“ Ø®Ø¨Ø± Ø¬Ù…Ù„Ø© ÙØ¹Ù„ÙŠØ©
            { text: "ÙƒØ§Ù†Ù Ø§Ù„Ø·Ø§Ù„Ø¨Ù ÙŠØ¯Ø±Ø³Ù Ø¨Ø¬Ø¯Ù‘Ù.",            type: "verb" },
            { text: "Ø£ØµØ¨Ø­ØªÙ Ø§Ù„Ø³Ù…Ø§Ø¡Ù ØªÙ…Ø·Ø±Ù.",                type: "verb" },
            { text: "ØµØ§Ø±Ù Ø§Ù„Ø£Ø·ÙØ§Ù„Ù ÙŠÙ„Ø¹Ø¨ÙˆÙ†Ù.",               type: "verb" },
            { text: "Ø¸Ù„Ù‘Ù Ø§Ù„Ø±Ø¬Ù„Ù ÙŠØ¹Ù…Ù„Ù Ø¨ØµØ¯Ù‚Ù.",             type: "verb" },
            { text: "Ø¨Ø§ØªØªÙ Ø§Ù„Ù‚Ø·Ø©Ù ØªØ¨Ø­Ø«Ù Ø¹Ù† Ø·Ø¹Ø§Ù…Ù.",         type: "verb" },
            { text: "Ø£Ø¶Ø­Ù‰ Ø§Ù„Ø·ÙÙ„Ù ÙŠØ¶Ø­ÙƒÙ ÙƒØ«ÙŠØ±Ù‹Ø§.",            type: "verb" },
            { text: "Ù…Ø§ Ø¨Ø±Ø­Ù Ø§Ù„Ø±Ø¬Ù„Ù ÙŠØ±Ø¯Ù‘ÙØ¯Ù Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø©Ù.",     type: "verb" },
            { text: "Ù…Ø§ ÙØªØ¦Ù Ø§Ù„Ø·Ø§Ø¦Ø±Ù ÙŠØºÙ†ÙŠ.",                type: "verb" },
            { text: "Ù…Ø§ Ø²Ø§Ù„ØªÙ Ø§Ù„Ù…Ø¹Ù„Ù…Ø©Ù ØªØ´Ø±Ø­Ù Ø§Ù„Ø¯Ø±Ø³Ù.",      type: "verb" },
            { text: "Ø£ØµØ¨Ø­Ù Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Ù†Ù ÙŠÙ‚Ø±Ø¢Ù†Ù Ø§Ù„ÙƒØªØ§Ø¨Ù.",      type: "verb" },

            // ÙƒØ§Ù† ÙˆØ£Ø®ÙˆØ§ØªÙ‡Ø§ â€“ Ø®Ø¨Ø± Ø¬Ù…Ù„Ø© Ø§Ø³Ù…ÙŠØ©
            { text: "ÙƒØ§Ù†Ù Ø§Ù„Ø·ÙÙ„Ù Ø£Ø®Ù„Ø§Ù‚ÙÙ‡ Ø­Ø³Ù†Ø©Ù‹.",           type: "nominal" },
            { text: "ØµØ§Ø±Ù Ø§Ù„Ø·Ù‚Ø³Ù Ø³Ù…Ø§Ø¤Ù‡ ØµØ§ÙÙŠØ©Ù‹.",            type: "nominal" },
            { text: "Ø£ØµØ¨Ø­ØªÙ Ø§Ù„Ù‚Ø±ÙŠØ©Ù Ø·Ø±Ù‚ÙÙ‡Ø§ Ø¢Ù…Ù†Ø©Ù‹.",         type: "nominal" },
            { text: "Ø¨Ø§ØªØªÙ Ø§Ù„Ø­Ø¯ÙŠÙ‚Ø©Ù Ø£Ø²Ù‡Ø§Ø±ÙÙ‡Ø§ Ù…ØªÙØªØ­Ø©Ù‹.",     type: "nominal" },
            { text: "Ø¸Ù„Ù‘Ù Ø§Ù„Ø¨Ø­Ø±Ù Ø£Ù…ÙˆØ§Ø¬ÙÙ‡ Ø¹Ø§Ù„ÙŠØ©Ù‹.",          type: "nominal" },
            { text: "Ù„ÙŠØ³Ù Ø§Ù„Ù…Ù†Ø²Ù„Ù Ø£Ø¨ÙˆØ§Ø¨ÙÙ‡ Ù…ÙØªÙˆØ­Ø©Ù‹.",        type: "nominal" },
            { text: "Ù…Ø§ Ø²Ø§Ù„Ù Ø§Ù„Ø¬Ø¨Ù„Ù Ù‚Ù…Ù‘ØªÙÙ‡ Ù…ÙƒØ³ÙˆÙ‘Ø©Ù‹ Ø¨Ø§Ù„Ø«Ù„Ø¬Ù.",type: "nominal" },
            { text: "ÙƒØ§Ù†ØªÙ Ø§Ù„Ø´Ø¬Ø±Ø©Ù Ø£ÙˆØ±Ø§Ù‚ÙÙ‡Ø§ Ø®Ø¶Ø±Ø§Ø¡Ù.",       type: "nominal" },
            { text: "Ø£Ø¶Ø­Ù‰ Ø§Ù„ÙƒØªØ§Ø¨Ù Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙÙ‡ ÙƒØ«ÙŠØ±Ø©Ù‹.",       type: "nominal" },
            { text: "Ø£ØµØ¨Ø­Ù Ø§Ù„Ù‡Ø§ØªÙÙ Ø¨Ø·Ø§Ø±ÙŠØªÙÙ‡ Ø¶Ø¹ÙŠÙØ©Ù‹.",       type: "nominal" },

            // ÙƒØ§Ù† ÙˆØ£Ø®ÙˆØ§ØªÙ‡Ø§ â€“ Ø®Ø¨Ø± Ø´Ø¨Ù‡ Ø¬Ù…Ù„Ø©
            { text: "ÙƒØ§Ù†Ù Ø§Ù„Ø·ÙÙ„Ù ÙÙŠ Ø§Ù„Ø¨ÙŠØªÙ.",               type: "semi" },
            { text: "Ø£ØµØ¨Ø­ØªÙ Ø§Ù„ÙØªØ§Ø©Ù Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø±ÙŠÙ‚Ù.",          type: "semi" },
            { text: "ØµØ§Ø±Ù Ø§Ù„Ù…Ø³Ø§ÙØ±ÙˆÙ†Ù ÙÙŠ Ø§Ù„Ù‚Ø·Ø§Ø±Ù.",          type: "semi" },
            { text: "Ø¸Ù„Ù‘Ù Ø§Ù„Ø³Ø§Ø¦Ù‚Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‚Ø¹Ø¯Ù.",            type: "semi" },
            { text: "Ø¨Ø§ØªÙ Ø§Ù„Ù‚Ù…Ø±Ù ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡Ù.",              type: "semi" },
            { text: "Ù…Ø§ Ø²Ø§Ù„ØªÙ Ø§Ù„Ø³ÙŠØ§Ø±Ø©Ù ÙÙŠ Ø§Ù„Ù…Ø±Ø¢Ø¨Ù.",        type: "semi" },
            { text: "Ù„ÙŠØ³Ù Ø§Ù„ÙƒØªØ§Ø¨Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙƒØªØ¨Ù.",            type: "semi" },
            { text: "ÙƒØ§Ù†ØªÙ Ø§Ù„Ø·Ø§Ù„Ø¨ØªØ§Ù†Ù ÙÙŠ Ø§Ù„ØµÙÙ‘Ù.",          type: "semi" },
            { text: "Ø£ØµØ¨Ø­Ù Ø§Ù„Ù…Ø¹Ù„Ù…Ù ÙÙˆÙ‚Ù Ø§Ù„Ù…Ù†ØµÙ‘Ø©Ù.",         type: "semi" },
            { text: "ÙƒØ§Ù†Ù Ø§Ù„Ù‡Ø§ØªÙÙ ØªØ­ØªÙ Ø§Ù„ÙˆØ³Ø§Ø¯Ø©Ù.",          type: "semi" },
            { text: "Ø¸Ù„Ù‘Ù Ø§Ù„Ù…ØªØ³Ø§Ø¨Ù‚ÙˆÙ†Ù Ø£Ù…Ø§Ù…Ù Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©Ù.",     type: "semi" },
            { text: "Ø¨Ø§ØªØªÙ Ø§Ù„Ø³ÙŠØ§Ø±Ø©Ù Ù‚Ø±Ø¨Ù Ø§Ù„Ù…Ù†Ø²Ù„Ù.",         type: "semi" },
            { text: "ØµØ§Ø±Ù Ø§Ù„Ø£Ø·ÙØ§Ù„Ù Ø­ÙˆÙ„Ù Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©Ù.",         type: "semi" },
            { text: "Ù…Ø§ Ø²Ø§Ù„ØªÙ Ø§Ù„Ø·Ø§Ø¦Ø±Ø©Ù ÙÙˆÙ‚Ù Ø§Ù„Ø³Ø­Ø§Ø¨Ù.",      type: "semi" },
            { text: "Ø£ØµØ¨Ø­ØªÙ Ø§Ù„Ù‚Ø·Ø©Ù Ø¨ÙŠÙ†Ù Ø§Ù„Ø£Ø´Ø¬Ø§Ø±Ù.",         type: "semi" },

            // Ø¥Ù† ÙˆØ£Ø®ÙˆØ§ØªÙ‡Ø§ â€“ Ø®Ø¨Ø± Ù…ÙØ±Ø¯ Ù„ÙØ¸Ù‹Ø§
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ø·Ø§Ù„Ø¨Ù Ù…Ø¬ØªÙ‡Ø¯ÙŒ.",                  type: "single" },
            { text: "Ø£Ù†Ù‘Ù Ø§Ù„ÙØªØ§ØªÙŠÙ†Ù Ù…ØªÙÙˆÙ‚ØªØ§Ù†Ù.",             type: "single" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†Ù Ø¬Ø§Ù‡Ø²ÙˆÙ†Ù.",               type: "single" },
            { text: "Ù„ÙŠØªÙ Ø§Ù„Ø·ÙÙ„Ù Ø³Ø¹ÙŠØ¯ÙŒ.",                    type: "single" },
            { text: "Ù„Ø¹Ù„Ù‘Ù Ø§Ù„Ø¬ÙˆÙ‘Ù Ø¬Ù…ÙŠÙ„ÙŒ.",                   type: "single" },
            { text: "Ù„ÙƒÙ†Ù‘Ù Ø§Ù„ØºØ´Ù‘Ù Ù…Ø°Ù…ÙˆÙ…ÙŒ.",                  type: "single" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ø´Ù…Ø³Ù Ù…Ø´Ø±Ù‚Ø©ÙŒ.",                   type: "single" },
            { text: "ÙƒØ£Ù†Ù‘Ù Ø§Ù„Ø±Ø¬Ù„Ù Ù‚ÙˆÙŠÙ‘ÙŒ.",                   type: "single" },
            { text: "Ù„ÙŠØªÙ Ø§Ù„Ø²Ù‡Ø±ØªÙŠÙ†Ù Ø¬Ù…ÙŠÙ„ØªØ§Ù†Ù.",              type: "single" },
            { text: "Ù„Ø¹Ù„Ù‘Ù Ø§Ù„Ø¬Ù†ÙˆØ¯Ù Ø«Ø§Ø¨ØªÙˆÙ†Ù.",                type: "single" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„ÙˆØ·Ù†Ù Ø¹Ø²ÙŠØ²ÙŒ.",                    type: "single" },
            { text: "ÙƒØ£Ù†Ù‘Ù Ø§Ù„Ø¬Ø¨Ù„Ù Ø´Ø§Ù…Ø®ÙŒ.",                   type: "single" },
            { text: "Ù„ÙƒÙ†Ù‘Ù Ø§Ù„ØµØ¯Ù‚Ù Ù…Ù†Ø¬Ø§Ø©ÙŒ.",                  type: "single" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„ÙƒØªØ¨Ù Ù…ÙÙŠØ¯Ø©ÙŒ.",                   type: "single" },
            { text: "Ù„ÙŠØªÙ Ø§Ù„Ø£Ø·ÙØ§Ù„Ù Ø³Ø¹Ø¯Ø§Ø¡Ù.",                 type: "single" },

            // Ø¥Ù† ÙˆØ£Ø®ÙˆØ§ØªÙ‡Ø§ â€“ Ø®Ø¨Ø± Ø¬Ù…Ù„Ø© ÙØ¹Ù„ÙŠØ©
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ø·Ø§Ù„Ø¨Ù ÙŠÙƒØªØ¨Ù Ø§Ù„Ø¯Ø±Ø³Ù.",            type: "verb" },
            { text: "Ø£Ù†Ù‘Ù Ø§Ù„ÙØªØ§Ø©Ù ØªÙ‚Ø±Ø£Ù Ø§Ù„ÙƒØªØ§Ø¨Ù.",           type: "verb" },
            { text: "Ù„Ø¹Ù„Ù‘Ù Ø§Ù„Ø³Ù…Ø§Ø¡Ù ØªÙ…Ø·Ø±Ù Ù‚Ø±ÙŠØ¨Ù‹Ø§.",           type: "verb" },
            { text: "ÙƒØ£Ù†Ù‘Ù Ø§Ù„Ø·ÙÙ„Ù ÙŠØ¨ÙƒÙŠ.",                    type: "verb" },
            { text: "Ù„ÙŠØªÙ Ø§Ù„Ù…Ø±Ø£ØªÙŠÙ†Ù ØªØ¹Ù…Ù„Ø§Ù†Ù Ø¨Ø¬Ø¯Ù‘Ù.",         type: "verb" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†Ù ÙŠØ±ÙƒØ¶ÙˆÙ†Ù Ø¨Ø³Ø±Ø¹Ø©Ù.",        type: "verb" },
            { text: "Ù„ÙƒÙ†Ù‘Ù Ø§Ù„ÙˆÙ‚ØªÙ ÙŠÙ…Ø±Ù‘Ù Ø³Ø±ÙŠØ¹Ù‹Ø§.",            type: "verb" },
            { text: "Ø£Ù†Ù‘Ù Ø§Ù„Ù‚Ø§Ø¦Ø¯Ù ÙŠÙ‚ÙˆØ¯Ù Ø§Ù„Ù…Ø¹Ø±ÙƒØ©Ù.",          type: "verb" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ø£Ø³ØªØ§Ø°Ù ÙŠØ´Ø±Ø­Ù Ø§Ù„Ø¯Ø±Ø³Ù.",           type: "verb" },
            { text: "ÙƒØ£Ù†Ù‘Ù Ø§Ù„Ø¹ØµÙÙˆØ±Ù ÙŠØºØ±Ù‘ÙØ¯Ù.",               type: "verb" },

            // Ø¥Ù† ÙˆØ£Ø®ÙˆØ§ØªÙ‡Ø§ â€“ Ø®Ø¨Ø± Ø¬Ù…Ù„Ø© Ø§Ø³Ù…ÙŠØ©
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ù‚Ù…Ø±Ù Ø¶ÙˆØ¤ÙÙ‡ Ø¬Ù…ÙŠÙ„ÙŒ.",              type: "nominal" },
            { text: "ÙƒØ£Ù†Ù‘Ù Ø§Ù„Ø¨Ø­Ø±Ù Ø£Ù…ÙˆØ§Ø¬ÙÙ‡ Ø¹Ø§Ù„ÙŠØ©ÙŒ.",          type: "nominal" },
            { text: "Ù„ÙŠØªÙ Ø§Ù„Ø±Ø¨ÙŠØ¹Ù Ø£Ø²Ù‡Ø§Ø±ÙÙ‡ ÙƒØ«ÙŠØ±Ø©ÙŒ.",          type: "nominal" },
            { text: "Ø£Ù†Ù‘Ù Ø§Ù„Ø·ÙÙ„Ù Ù„Ø¹Ø¨ØªÙÙ‡ Ù…ÙƒØ³ÙˆØ±Ø©ÙŒ.",           type: "nominal" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ø·Ø§Ù„Ø¨Ø§ØªÙ Ø¬Ù‡ÙˆØ¯ÙÙ‡ÙÙ†Ù‘Ù Ù…Ø´ÙƒÙˆØ±Ø©ÙŒ.",    type: "nominal" },
            { text: "Ù„ÙƒÙ†Ù‘Ù Ø§Ù„Ø±Ø¬Ù„Ù Ù†ÙŠØªÙÙ‡ ØµØ§ÙÙŠØ©ÙŒ.",            type: "nominal" },
            { text: "Ù„Ø¹Ù„Ù‘Ù Ø§Ù„ÙˆØ·Ù†Ù Ø£Ø±Ø¶ÙÙ‡ Ø·ÙŠØ¨Ø©ÙŒ.",             type: "nominal" },
            { text: "Ø£Ù†Ù‘Ù Ø§Ù„Ø·Ø±ÙŠÙ‚Ù Ù†Ù‡Ø§ÙŠØªÙÙ‡ Ù‚Ø±ÙŠØ¨Ø©ÙŒ.",          type: "nominal" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ù…Ø³Ø§Ø¡Ù Ø³Ù…Ø§Ø¤Ù‡ ÙˆØ±Ø¯ÙŠÙ‘Ø©ÙŒ.",           type: "nominal" },
            { text: "ÙƒØ£Ù†Ù‘Ù Ø§Ù„Ù…Ø·Ø±Ù Ù‚Ø·Ø±Ø§ØªÙÙ‡ Ù„Ø§Ù…Ø¹Ø©ÙŒ.",          type: "nominal" },

            // Ø¥Ù† ÙˆØ£Ø®ÙˆØ§ØªÙ‡Ø§ â€“ Ø®Ø¨Ø± Ø´Ø¨Ù‡ Ø¬Ù…Ù„Ø©
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ø·Ø§Ù„Ø¨Ù ÙÙŠ Ø§Ù„ØµÙÙ‘Ù.",               type: "semi" },
            { text: "Ù„ÙŠØªÙ Ø§Ù„Ø·ÙÙ„Ù Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø±ÙŠØ±Ù.",              type: "semi" },
            { text: "Ù„Ø¹Ù„Ù‘Ù Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†Ù ÙÙŠ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©Ù.",          type: "semi" },
            { text: "ÙƒØ£Ù†Ù‘Ù Ø§Ù„Ø±Ø¬Ù„Ù ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚Ù.",              type: "semi" },
            { text: "Ù„ÙƒÙ†Ù‘Ù Ø§Ù„Ù…Ø§Ù„Ù ÙÙŠ Ø§Ù„Ø®Ø²Ù†Ø©Ù.",              type: "semi" },
            { text: "Ø£Ù†Ù‘Ù Ø§Ù„Ø£ÙˆØ±Ø§Ù‚Ù Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§ÙˆÙ„Ø©Ù.",           type: "semi" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ù‡Ø§ØªÙÙ ÙÙŠ Ø§Ù„Ø¹Ù„Ø¨Ø©Ù.",              type: "semi" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ø³ÙŠØ§Ø±Ø©Ù Ø¹Ù†Ø¯Ù Ø§Ù„Ø¨Ø§Ø¨Ù.",            type: "semi" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ø¬Ù†ÙˆØ¯Ù Ø£Ù…Ø§Ù…Ù Ø§Ù„Ø«ÙƒÙ†Ø©Ù.",           type: "semi" },
            { text: "Ù„Ø¹Ù„Ù‘Ù Ø§Ù„Ø·ÙÙ„Ù ØªØ­ØªÙ Ø§Ù„Ø·Ø§ÙˆÙ„Ø©Ù.",           type: "semi" },
            { text: "ÙƒØ£Ù†Ù‘Ù Ø§Ù„Ù‚Ø·Ø©Ù ÙÙˆÙ‚Ù Ø§Ù„Ø³Ø·Ø­Ù.",             type: "semi" },
            { text: "Ù„ÙŠØªÙ Ø§Ù„Ù…ÙƒØªØ¨Ù Ù‚Ø±Ø¨Ù Ø§Ù„Ù†Ø§ÙØ°Ø©Ù.",           type: "semi" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ù…Ø¹Ù„Ù…Ø§ØªÙ Ø®Ù„ÙÙ Ø§Ù„Ø³Ø¨ÙˆØ±Ø©Ù.",         type: "semi" },
            { text: "Ù„ÙƒÙ†Ù‘Ù Ø§Ù„Ø³ÙŠØ§Ø±Ø©Ù Ø£Ù…Ø§Ù…Ù Ø§Ù„Ø¨ÙŠØªÙ.",          type: "semi" },
            { text: "ÙƒØ£Ù†Ù‘Ù Ø§Ù„Ø·Ø§Ø¦Ø±Ù ÙÙˆÙ‚Ù Ø§Ù„Ø´Ø¬Ø±Ø©Ù.",           type: "semi" }
        ];

        // Ø¬Ù…Ù„ Ø®Ø§ØµØ© Ø¨Ø£Ù†ÙˆØ§Ø¹ Ø§Ø³Ù… ÙƒØ§Ù†/Ø¥Ù† Ø§Ù„Ø£Ø®Ø±Ù‰
        const extraQuestions = [
            // Ø¶Ù…ÙŠØ± Ù…ØªØµÙ„
            { text: "ÙƒÙ†ØªÙ Ù…Ø¬ØªÙ‡Ø¯Ù‹Ø§.",               type: "single", nameType: "attached" },
            { text: "ÙƒÙ†Ù‘Ø§ Ø³Ø¹Ø¯Ø§Ø¡Ù.",                type: "single", nameType: "attached" },
            { text: "Ø¥Ù†Ù‘ÙÙ‡Ù ØµØ§Ø¯Ù‚ÙŒ.",               type: "single", nameType: "attached" },
            { text: "Ø¥Ù†Ù‘ÙÙ‡Ø§ Ù…Ø¬ØªÙ‡Ø¯Ø©ÙŒ.",             type: "single", nameType: "attached" },
            { text: "Ø¥Ù†Ù‘ÙÙ‡Ù… Ù…ØªØ¹Ø§ÙˆÙ†ÙˆÙ†Ù.",           type: "single", nameType: "attached" },

            // Ø¶Ù…ÙŠØ± Ù…Ù†ÙØµÙ„
            { text: "ÙƒØ§Ù†Ù Ù‡ÙˆÙ Ø§Ù„ÙØ§Ø¦Ø²Ù.",           type: "single", nameType: "detached" },
            { text: "ÙƒØ§Ù†ØªÙ’ Ù‡ÙŠÙ Ø§Ù„Ù…Ø¬ØªÙ‡Ø¯Ø©Ù.",        type: "single", nameType: "detached" },
            { text: "Ø¥Ù†Ù‘Ù Ø£Ù†ØªÙ Ù…Ø¬ØªÙ‡Ø¯ÙŒ.",           type: "single", nameType: "detached" },

            // Ø§Ø³Ù… Ø¥Ø´Ø§Ø±Ø©
            { text: "ÙƒØ§Ù†Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ø§Ù„Ø¨Ù Ù…Ø¬ØªÙ‡Ø¯Ù‹Ø§.",   type: "single", nameType: "demonstrative" },
            { text: "Ø¥Ù†Ù‘Ù Ù‡Ø°Ù‡Ù Ø§Ù„ÙØªØ§Ø©Ù Ù…ØªÙÙˆÙ‚Ø©ÙŒ.",  type: "single", nameType: "demonstrative" },
            { text: "Ø¥Ù†Ù‘Ù Ù‡Ø¤Ù„Ø§Ø¡Ù Ø§Ù„Ø·Ù„Ø§Ø¨Ù Ù…Ø¬ØªÙ‡Ø¯ÙˆÙ†Ù.", type: "single", nameType: "demonstrative" },

            // Ø§Ø³Ù… Ù…ÙˆØµÙˆÙ„
            { text: "ÙƒØ§Ù†Ù Ø§Ù„Ø°ÙŠ Ù†Ø¬Ø­Ù Ø³Ø¹ÙŠØ¯Ù‹Ø§.",      type: "single", nameType: "relative" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„Ø°ÙŠÙ†Ù Ø¯Ø±Ø³ÙˆØ§ Ù†Ø§Ø¬Ø­ÙˆÙ†Ù.",  type: "single", nameType: "relative" },
            { text: "Ø¥Ù†Ù‘Ù Ø§Ù„ØªÙŠ ØªÙÙˆØ²Ù Ù…Ø¨Ø¯Ø¹Ø©ÙŒ.",      type: "single", nameType: "relative" }
        ];

        // Ù†Ø±ÙÙ‚ Ù†ÙˆØ¹ Ø§Ù„Ø§Ø³Ù… (noun) Ù„ÙƒÙ„ Ø§Ù„Ø¬Ù…Ù„ Ø§Ù„Ø£ØµÙ„ÙŠØ©
        const questionBank = [
            ...baseQuestions.map(q => ({ ...q, nameType: "noun" })),
            ...extraQuestions
        ];

        let draggedId = null;
        let timerInterval = null;
        let remainingSeconds = 0;
        const DEFAULT_TIME = 60;
        let timerStarted = false; // Ø¬Ø¯ÙŠØ¯: Ù„Ù…Ø¹Ø±ÙØ© Ù‡Ù„ Ø§Ù„Ù…Ø¤Ù‚Øª ÙŠØ¹Ù…Ù„ Ø£Ù… Ù„Ø§
        let successSound;
        let failSound;
        let currentQuestions = [];

        document.addEventListener('DOMContentLoaded', function () {
            const btnReset      = document.getElementById('btn-reset');
            const btnCheck      = document.getElementById('btn-check');
            const btnStartTimer = document.getElementById('btn-start-timer');
            const btnAdvanced   = document.getElementById('btn-advanced');
            const answerPool    = document.getElementById('answer-pool');

            successSound = document.getElementById('success-sound');
            failSound    = document.getElementById('fail-sound');

            updateLevelTexts();
            renderCategories();
            loadNewRound();

            btnReset.addEventListener('click', resetQuiz);
            btnCheck.addEventListener('click', checkAnswers);

            // Ø²Ø± Ø§Ø¨Ø¯Ø£ Ù…Ø§ Ø²Ø§Ù„ ÙŠØ¹Ù…Ù„ ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ø¥Ù† Ø£Ø­Ø¨Ù‘Øª Ø§Ù„Ù…Ø¹Ù„Ù…Ø©
            btnStartTimer.addEventListener('click', () => startTimer(DEFAULT_TIME));
            btnAdvanced.addEventListener('click', toggleLevel);

            updateTimerDisplay(0);
            attachDropzoneEvents(answerPool);
        });

        function getActiveCategories() {
            return currentLevel === 1 ? categoriesLevel1 : categoriesLevel2;
        }

        function updateLevelTexts() {
            const q = document.getElementById('question-text');
            const h = document.getElementById('level-hint');
            const title = document.querySelector('h1');

            if (currentLevel === 1) {
                title.textContent = "Ù…Ø³Ø§Ø¨Ù‚Ø© Ø£Ù†ÙˆØ§Ø¹ Ø®Ø¨Ø± ÙƒØ§Ù† ÙˆØ¥Ù†";
                q.innerHTML = 'Ø§Ø³Ø­Ø¨ Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù…Ù† Ø§Ù„Ø£Ø³ÙÙ„ ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ø®Ø§Ù†Ø© <strong>Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¨Ø±</strong> Ø§Ù„ØµØ­ÙŠØ­: (Ø®Ø¨Ø± Ù…ÙØ±Ø¯ Ù„ÙØ¸Ù‹Ø§ØŒ Ø®Ø¨Ø± Ø¬Ù…Ù„Ø© ÙØ¹Ù„ÙŠØ©ØŒ Ø®Ø¨Ø± Ø¬Ù…Ù„Ø© Ø§Ø³Ù…ÙŠØ©ØŒ Ø®Ø¨Ø± Ø´Ø¨Ù‡ Ø¬Ù…Ù„Ø©).';
                h.textContent = 'Ø§Ø³Ø­Ø¨ÙŠ Ø§Ù„Ø¬Ù…Ù„Ø© ÙˆØ¶Ø¹ÙŠÙ‡Ø§ ÙÙŠ Ø®Ø§Ù†Ø© Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¨Ø± Ø§Ù„ØµØ­ÙŠØ­';
            } else {
                title.textContent = "Ù…Ø³Ø§Ø¨Ù‚Ø© Ø£Ù†ÙˆØ§Ø¹ Ø§Ø³Ù… ÙƒØ§Ù† ÙˆØ¥Ù† (Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙ‚Ø¯Ù…)";
                q.innerHTML = 'Ø§Ø³Ø­Ø¨ Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù…Ù† Ø§Ù„Ø£Ø³ÙÙ„ ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ø®Ø§Ù†Ø© Ù†ÙˆØ¹ <strong>Ø§Ø³Ù… ÙƒØ§Ù† Ø£Ùˆ Ø¥Ù†</strong> Ø§Ù„ØµØ­ÙŠØ­: (Ø¶Ù…ÙŠØ± Ù…ØªØµÙ„ØŒ Ø¶Ù…ÙŠØ± Ù…Ù†ÙØµÙ„ØŒ Ø§Ø³Ù… Ø¸Ø§Ù‡Ø±ØŒ Ø§Ø³Ù… Ø¥Ø´Ø§Ø±Ø©ØŒ Ø§Ø³Ù… Ù…ÙˆØµÙˆÙ„).';
                h.textContent = 'Ø§Ø³Ø­Ø¨ÙŠ Ø§Ù„Ø¬Ù…Ù„Ø© ÙˆØ¶Ø¹ÙŠÙ‡Ø§ ÙÙŠ Ø®Ø§Ù†Ø© Ù†ÙˆØ¹ Ø§Ø³Ù… ÙƒØ§Ù† Ø£Ùˆ Ø¥Ù† Ø§Ù„ØµØ­ÙŠØ­';
            }
        }

        function toggleLevel() {
            const btnAdvanced = document.getElementById('btn-advanced');
            currentLevel = currentLevel === 1 ? 2 : 1;
            btnAdvanced.textContent = currentLevel === 1 ? 'Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙ‚Ø¯Ù…' : 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„';
            updateLevelTexts();
            resetQuiz(true);
        }

        function renderCategories() {
            const body = document.getElementById('categories-body');
            body.innerHTML = '';
            const cats = getActiveCategories();

            cats.forEach(cat => {
                const tr = document.createElement('tr');

                const tdLabel = document.createElement('td');
                tdLabel.textContent = cat.label;

                const tdDrop = document.createElement('td');
                tdDrop.className = 'dropzone';
                tdDrop.id = cat.id;
                tdDrop.textContent = 'Ø§Ø³Ø­Ø¨ Ø§Ù„Ø¬Ù…Ù„ Ø§Ù„ØªÙŠ ØªÙ†ØªÙ…ÙŠ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ Ø¥Ù„Ù‰ Ù‡Ù†Ø§';

                tr.appendChild(tdLabel);
                tr.appendChild(tdDrop);
                body.appendChild(tr);

                attachDropzoneEvents(tdDrop);
            });
        }

        function loadNewRound() {
            if (currentLevel === 1) {
                currentQuestions = getRandomSubset(questionBank, 8);
            } else {
                currentQuestions = getAdvancedSubset();
            }
            renderAnswers();
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = '';
            resultDiv.classList.remove('win-bounce');
        }

        // Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ø¹Ø§Ù…Ø©
        function getRandomSubset(array, count) {
            const copy = [...array];
            const result = [];
            while (result.length < count && copy.length > 0) {
                const idx = Math.floor(Math.random() * copy.length);
                result.push(copy.splice(idx, 1)[0]);
            }
            return result;
        }

        // Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…: ØªØ´Ù…Ù„ ÙƒÙ„ Ø£Ù†ÙˆØ§Ø¹ Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø³Ø®
        function getAdvancedSubset() {
            const nameTypes = ['attached', 'detached', 'noun', 'demonstrative', 'relative'];
            const selected = [];
            const usedIndexes = new Set();

            // Ù†Ø¶Ù…Ù† Ø¬Ù…Ù„Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù…Ù† ÙƒÙ„ Ù†ÙˆØ¹
            nameTypes.forEach(nt => {
                const options = questionBank
                    .map((q, idx) => ({ q, idx }))
                    .filter(o => o.q.nameType === nt && !usedIndexes.has(o.idx));
                if (options.length > 0) {
                    const choice = options[Math.floor(Math.random() * options.length)];
                    selected.push(choice.q);
                    usedIndexes.add(choice.idx);
                }
            });

            // Ù†ÙƒÙ…Ù‘Ù„ Ø­ØªÙ‰ Ù¨ Ø¬Ù…Ù„ Ø¨Ø£ÙŠ Ø¬Ù…Ù„ Ø£Ø®Ø±Ù‰
            const remaining = questionBank
                .map((q, idx) => ({ q, idx }))
                .filter(o => !usedIndexes.has(o.idx));

            while (selected.length < 8 && remaining.length > 0) {
                const i = Math.floor(Math.random() * remaining.length);
                selected.push(remaining[i].q);
                remaining.splice(i, 1);
            }

            return selected;
        }

        function renderAnswers() {
            const pool = document.getElementById('answer-pool');
            pool.innerHTML = '';

            currentQuestions.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'answer';
                card.id = 'ans' + (index + 1);
                card.textContent = item.text;
                card.setAttribute('draggable', 'true');
                card.dataset.type = item.type;
                card.dataset.nameType = item.nameType;

                card.addEventListener('dragstart', dragStart);
                pool.appendChild(card);
            });
        }

        function attachDropzoneEvents(zone) {
            zone.addEventListener('dragover', dragOver);
            zone.addEventListener('dragenter', dragEnter);
            zone.addEventListener('dragleave', dragLeave);
            zone.addEventListener('drop', drop);
        }

        function dragStart(e) {
            if (this.classList.contains('disabled')) return;
            draggedId = this.id;
            e.dataTransfer.setData('text/plain', draggedId);

            // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ø³Ø­Ø¨
            if (!timerStarted) {
                startTimer(DEFAULT_TIME);
            }
        }

        function dragOver(e) {
            e.preventDefault();
        }

        function dragEnter(e) {
            e.preventDefault();
            this.classList.add('over');
        }

        function dragLeave() {
            this.classList.remove('over');
        }

        function drop(e) {
            e.preventDefault();
            this.classList.remove('over');

            const id = e.dataTransfer.getData('text/plain') || draggedId;
            const element = document.getElementById(id);
            if (!element || element.classList.contains('disabled')) return;

            if (this.textContent.trim().startsWith('Ø§Ø³Ø­Ø¨')) {
                this.textContent = '';
            }

            element.classList.remove('correct', 'incorrect');
            this.appendChild(element);
        }

        function showCelebration() {
            const container = document.getElementById('celebration');
            container.innerHTML = '';
            const starCount = 150;
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const hue = Math.floor(Math.random() * 360);
                star.style.backgroundColor = `hsl(${hue}, 90%, 60%)`;
                star.style.left = Math.random() * 100 + 'vw';
                star.style.animationDelay = (Math.random() * 0.7) + 's';
                star.style.transform = `translateY(-10vh) scale(${0.7 + Math.random() * 0.8})`;
                container.appendChild(star);
            }

            document.body.classList.add('win-flash');
            setTimeout(() => {
                container.innerHTML = '';
                document.body.classList.remove('win-flash');
            }, 2600);
        }

        function resetQuiz(fromLevelSwitch = false) {
            const resultDiv = document.getElementById('result');

            stopTimer();
            updateTimerDisplay(0);

            document.querySelectorAll('.answer').forEach(ans => ans.remove());

            const celebration = document.getElementById('celebration');
            celebration.innerHTML = '';
            document.body.classList.remove('win-flash');

            resultDiv.textContent = fromLevelSwitch
                ? (currentLevel === 1 ? 'Ø¹Ø¯Ù†Ø§ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„ âœ¨' : 'Ø£Ù†Øª Ø§Ù„Ø¢Ù† ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… âœ¨')
                : 'Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© âœ¨';
            resultDiv.style.color = '#f39c12';
            resultDiv.classList.remove('win-bounce');

            document.body.classList.add('reset-flash');
            setTimeout(() => {
                document.body.classList.remove('reset-flash');
            }, 700);

            if (successSound) {
                successSound.pause();
                successSound.currentTime = 0;
            }
            if (failSound) {
                failSound.pause();
                failSound.currentTime = 0;
            }

            renderCategories();
            loadNewRound();
        }

        function checkAnswers() {
            const answers = document.querySelectorAll('.answer');
            let correctCount = 0;
            let total = answers.length;

            // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¥Ù†Ù‡Ø§Ø¡"
            stopTimer();

            const cats = getActiveCategories();

            answers.forEach(ans => {
                ans.classList.remove('correct', 'incorrect');

                let keyNeeded;
                if (currentLevel === 1) {
                    keyNeeded = ans.dataset.type;
                } else {
                    keyNeeded = ans.dataset.nameType;
                }

                const correctCat = cats.find(c => c.key === keyNeeded);
                const correctZoneId = correctCat ? correctCat.id : '';
                const parentZone = ans.parentElement.id;

                if (parentZone === correctZoneId) {
                    ans.classList.add('correct');
                    correctCount++;
                } else {
                    ans.classList.add('incorrect');
                }
            });

            const resultDiv = document.getElementById('result');

            if (successSound) {
                successSound.pause();
                successSound.currentTime = 0;
            }
            if (failSound) {
                failSound.pause();
                failSound.currentTime = 0;
            }

            if (correctCount === total && total > 0) {
                const levelMsg = currentLevel === 1 ? 'Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®Ø¨Ø±' : 'Ø£Ù†ÙˆØ§Ø¹ Ø§Ø³Ù… ÙƒØ§Ù† ÙˆØ¥Ù†';
                resultDiv.textContent =
                    `ğŸ‘ Ø£Ø­Ø³Ù†ØªÙ! Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ù…Ù„ ÙÙŠ Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„ØµØ­ÙŠØ­ (${levelMsg}). Ø¹Ù„Ø§Ù…ØªÙƒ: ${correctCount} Ù…Ù† ${total}`;
                resultDiv.style.color = '#27ae60';
                resultDiv.classList.add('win-bounce');
                if (successSound) {
                    successSound.play().catch(() => {});
                }
                showCelebration();
            } else {
                resultDiv.textContent =
                    `ğŸ˜” Ù‡Ù†Ø§Ùƒ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡. Ø¹Ù„Ø§Ù…ØªÙƒ: ${correctCount} Ù…Ù† ${total} â€” Ø­Ø§ÙˆÙ„ÙŠ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ØŒ Ø£Ù†ØªÙ Ù‚Ø§Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£ÙØ¶Ù„!`;
                resultDiv.style.color = '#c0392b';
                resultDiv.classList.remove('win-bounce');
                if (failSound) {
                    failSound.play().catch(() => {});
                }
            }
        }

        function disableDragging() {
            const answers = document.querySelectorAll('.answer');
            answers.forEach(ans => {
                ans.classList.add('disabled');
                ans.setAttribute('draggable', 'false');
            });
        }

        function startTimer(seconds) {
            stopTimer();
            remainingSeconds = seconds;
            updateTimerDisplay(remainingSeconds);
            timerStarted = true;

            timerInterval = setInterval(() => {
                remainingSeconds--;
                if (remainingSeconds <= 0) {
                    remainingSeconds = 0;
                    updateTimerDisplay(remainingSeconds);
                    stopTimer();
                    disableDragging();
                } else {
                    updateTimerDisplay(remainingSeconds);
                }
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            timerStarted = false;
        }

        function updateTimerDisplay(seconds) {
            const timerSpan = document.getElementById('timer');
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            const m = String(mins).padStart(2, '0');
            const s = String(secs).padStart(2, '0');
            timerSpan.textContent = `${m}:${s}`;
        }
    </script>

</body>
</html>









